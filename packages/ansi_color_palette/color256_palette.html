<link rel="import" href="../../packages/polymer/polymer.html">
<link rel="import" href="../../packages/color_palette/color_palette.html">
<link rel="import" href="../../packages/color_palette/color_palette_cell.html">
<polymer-element name="color256-palette">
  <template>
    <link rel="stylesheet" href="ansi_color_palette.css">
    <style>
      .range-cell > div {
        display: -webkit-flex;
        display: -moz-flex;
        display: flex;
        -webkit-align-items: center;
        -moz-align-items: center;
        align-items: center;
        -webkit-justify-content: center;
        -moz-justify-content: center;
        justify-content: center;

        height: 34px;
      }
      .rgb-factor {
        box-sizing: border-box;
        font-family: mono;
        text-align: right;
        width: 3.2em;
        padding: 0px 3px;
        color: #444;
      }
      .range-cell[disabled] .rgb-factor {
        color: #aaa;
      }
      .rgb-border-wrapper, .grayscale-border-wrapper {
        box-sizing: border-box;
        border: 1px solid rgba(128, 128, 128, 0.2);
        border-radius: 4px;
        padding: 3px;
        height: 100%;
        width: 100%
      }
      .red-range-wrapper, .green-range-wrapper, .blue-range-wrapper, .grayscale-range-wrapper {
        display: -webkit-flex;
        display: -moz-flex;
        display: flex;
        -webkit-align-items: center;
        -moz-align-items: center;
        align-items: center;
        -webkit-justify-content: center;
        -moz-justify-content: center;
        justify-content: center;

        box-sizing: border-box;
        padding: 0px 2px;
        border-radius: 3px;
        width: 100%;
        height: 100%;
      }
      .red-range-wrapper {
        background: -moz-linear-gradient(left, #111, red);
        background: -webkit-linear-gradient(left, #111, red);
        background: linear-gradient(left, #111, red);
      }
      .range-cell[disabled] .red-range-wrapper {
        background: -moz-linear-gradient(left, #666, #966);
        background: -webkit-linear-gradient(left, #666, #966);
        background: linear-gradient(left, #666, #966);
      }
      .green-range-wrapper {
        background: -moz-linear-gradient(left, #111, green);
        background: -webkit-linear-gradient(left, #111, green);
        background: linear-gradient(left, #111, green);
      }
      .range-cell[disabled] .green-range-wrapper {
        background: -moz-linear-gradient(left, #666, #696);
        background: -webkit-linear-gradient(left, #666, #696);
        background: linear-gradient(left, #666, #696);
      }
      .blue-range-wrapper {
        background: -moz-linear-gradient(left, #111, blue);
        background: -webkit-linear-gradient(left, #111, blue);
        background: linear-gradient(left, #111, blue);
      }
      .range-cell[disabled] .blue-range-wrapper {
        background: -moz-linear-gradient(left, #666, #669);
        background: -webkit-linear-gradient(left, #666, #669);
        background: linear-gradient(left, #666, #669);
      }
      .red-range, .green-range, .blue-range, .grayscale-range {
        display: block;
        margin: 0px;
        width: 97%;
        height: 100%;
      }
      .grayscale-range-wrapper {
        background: -moz-linear-gradient(left, black, white);
        background: -webkit-linear-gradient(left, black, white);
        background: linear-gradient(left, black, white);
      }
      .range-cell[disabled] .grayscale-range-wrapper {
        background: -moz-linear-gradient(left, #666, #ccc);
        background: -webkit-linear-gradient(left, #666, #ccc);
        background: linear-gradient(left, #666, #ccc);
      }
    </style>
    <color-palette>
      <table>
        <tbody class="standard-colors">
          <tr>
            <td><color-palette-cell x-code="0"></color-palette-cell></td>
            <td><color-palette-cell x-code="1"></color-palette-cell></td>
            <td><color-palette-cell x-code="2"></color-palette-cell></td>
            <td><color-palette-cell x-code="3"></color-palette-cell></td>
            <td><color-palette-cell x-code="4"></color-palette-cell></td>
            <td><color-palette-cell x-code="5"></color-palette-cell></td>
            <td><color-palette-cell x-code="6"></color-palette-cell></td>
            <td><color-palette-cell x-code="7"></color-palette-cell></td>
          </tr>
          <tr>
            <td><color-palette-cell x-code="8"></color-palette-cell></td>
            <td><color-palette-cell x-code="9"></color-palette-cell></td>
            <td><color-palette-cell x-code="10"></color-palette-cell></td>
            <td><color-palette-cell x-code="11"></color-palette-cell></td>
            <td><color-palette-cell x-code="12"></color-palette-cell></td>
            <td><color-palette-cell x-code="13"></color-palette-cell></td>
            <td><color-palette-cell x-code="14"></color-palette-cell></td>
            <td><color-palette-cell x-code="15"></color-palette-cell></td>
          </tr>
        </tbody>
        <tbody class="rgb-colors">
          <tr>
            <td>
              <color-palette-cell x-code="{{rgbCode.code}}">
              </color-palette-cell>
            </td>
            <td colspan="7" class="range-cell" disabled?="{{!rgbCell.selected}}">
              <div>
                <div class="rgb-factor">{{redFactor}}</div>
                <div class="rgb-border-wrapper">
                  <div class="red-range-wrapper">
                    <input class="red-range" type="range"
                      min="0" max="5" step="1" value="5"
                      disabled?="{{!rgbCell.selected}}"
                      list="rgb-range-data"
                      on-input="{{notifyRedChange}}">
                  </div>
                </div>
              </div>
              <div>
                <div class="rgb-factor">{{greenFactor}}</div>
                <div class="rgb-border-wrapper">
                  <div class="green-range-wrapper">
                    <input class="green-range" type="range"
                      min="0" max="5" step="1" value="0"
                      disabled?="{{!rgbCell.selected}}"
                      list="rgb-range-data"
                      on-input="{{notifyGreenChange}}">
                  </div>
                </div>
              </div>
              <div>
                <div class="rgb-factor">{{blueFactor}}</div>
                <div class="rgb-border-wrapper">
                  <div class="blue-range-wrapper">
                    <input class="blue-range" type="range"
                      min="0" max="5" step="1" value="4"
                      disabled?="{{!rgbCell.selected}}"
                      list="rgb-range-data"
                      on-input="{{notifyBlueChange}}">
                  </div>
                </div>
              </div>
              <datalist id="rgb-range-data">
                <option value="0"><option value="1"><option value="2">
                <option value="3"><option value="4"><option value="5">
              </datalist>
            </td>
          </tr>
        </tbody>
        <tbody class="grayscale-colors">
          <tr>
            <td>
              <color-palette-cell x-code="{{grayscaleCode.code}}">
              </color-palette-cell>
            </td>
            <td colspan="7" class="range-cell" disabled?="{{!grayscaleCell.selected}}">
              <div>
                <div class="grayscale-border-wrapper">
                  <div class="grayscale-range-wrapper">
                    <input class="grayscale-range" type="range"
                      min="232" max="255" step="1" value="234"
                      disabled?="{{!grayscaleCell.selected}}"
                      on-input="{{notifyGrayScaleChange}}">
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </color-palette>
  </template>
  <script type="application/dart" src="color256_palette.dart"></script>
</polymer-element>
